
<app-header></app-header>
<style>
    .Actionwidth
    {
        width:200px;
    }
</style>
<form #blogForm="ngForm" (ngSubmit)="blogForm.form.valid ">
    <div class="row">

        <div class="container card border-primary  p-4">
            <h4>Add Blog :</h4>
        <br>
            <div class="form-group row">
                <div class="col-6 ">
                    <div class="form-group row">
                        <div class="col-5">
                            <label>Blog Title:</label>
                        </div>
                        <div class="col-7">
                            <input type="text" class="form-control" id="blogTitle" name="blogTitle"
                                [(ngModel)]="blogModel.blogTitle" #blogTitle="ngModel" required>
                            <span class="text-danger"
                                *ngIf="(blogTitle.touched || blogForm.submitted) && blogTitle.errors?.required">
                                Title is required
                            </span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-5">
                            <label>Blog Image</label>
                        </div>
                        <div class="col-7">
                            <input type="file" accept="image/*" #file (change)="upload($event)"
                                [(ngModel)]="blogModel.blogImage" name="blogimage" />
                            <!-- <button class="btn success-btn ml-10" (click)="uploadFile(file.files)">
                                Upload File</button> -->
                            <!-- <input type="file" accept="image/*" (change)="showPreview($event)" /> -->
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-5">
                            <label>CreatedBy :</label>
                        </div>
                        <div class="col-7">
                            <input type="text" class="form-control" id="createdBy" name="createdBy"
                                [(ngModel)]="blogModel.createdBy" #createdBy="ngModel" required>
                            <span class="text-danger"
                                *ngIf="(createdBy.touched || blogForm.submitted) && createdBy.errors?.required">
                                CreatedBy is required
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-4 ">
                    <div class="imagePreview" *ngIf="imageURL && imageURL !== ''">
                        <img [src]="imageURL" width="200px" height="200px">
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-group">
                        <label>Description :</label>
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-group">
                        <quill-editor [styles]="{height: '200px'}" name="description"
                            [(ngModel)]="blogModel.description" trackChanges="all" #description="ngModel"
                            [modules]="modules" required>
                        </quill-editor>
                        <span class="text-danger"
                            *ngIf="(description.touched ||  blogForm.submitted) && description.errors?.required">
                            Description is required
                        </span>
                    </div>
                </div>
                

                <div class="col-12">
                    <div class="form-group">
                        <div class="col-3">
                            <button type="submit" class="btn btn-primary col-12"
                                (click)="AddBlog()">{{btntext}}</button>
                        </div>
                    </div>
                </div>
            </div>             
            <hr />
            <div class="container p-2 tabledata" style="overflow-y: scroll;height: 400px;">
                <h4 class="text-info">Blog Details</h4><br>
                <table class="table table-striped table-bordered">
                    <tr>
                        <th style="display: none;">Blog ID</th>
                        <th class="imgwidth" style="width:20px">Blog Image</th>
                        <th>Blog Title</th>                        
                        <th>Description</th>                        
                        <th>CreatedBy</th>
                        <th class="Actionwidth">Action</th>
                    </tr>
                    <tr *ngFor="let blog of blogDetails; let i=index" [ngClass]="{'active': selectedIndex == i}">
                        <td style="display: none;"> {{blog.blogID}}</td>
                        <td class="imgwidth" style="width:20px"> <img src="data:image/png;base64,{{blog.blogImage}}"
                                width="40px" height="40px" /></td>
                        <td> {{blog.blogTitle}}</td>
                        <td><span style="font-size: 13px" [innerHTML]="blog.description"></span></td>
                        <td>{{blog.createdBy}}</td>
                        <td class="Actionwidth">
                            <button type="submit" class="btn btn-secondary" (click)="onEdit(blog)">Edit</button>
                            <button type="submit" class="btn btn-danger" (click)="onDelete(blog)">Delete</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div> 
</form>
<app-footer></app-footer>