<app-adminheader></app-adminheader>
<form #serviceTypeForm="ngForm" (ngSubmit)="serviceTypeForm.form.valid ">
    <div class="row">

        <div class="container card border-primary  p-4" >
            <br>
           <h4>Add Category :</h4>
            <hr/>
            <div class="form-group row">
             <div class="col-6 ">
            <div class="form-group row">
                <div class="col-5">
                    <label>Category Name :</label>
                </div>
                <div class="col-7">
                    <input type="text" class="form-control"  id="serviceTypeName"
                     name="serviceTypeName"  [(ngModel)]="serviceTypeModel.serviceTypeName"
                     #serviceTypeName="ngModel" required>
                     <span class="text-danger"
                     *ngIf="(serviceTypeName.touched || serviceTypeForm.submitted) && serviceTypeName.errors?.required">
                     Category Name is required
                 </span>
                </div>
            </div>
            <div class="form-group row">
                    <div class="col-5">
                        <label>Category Image</label>
                    </div>
                    <div class="col-7">
                            <input type="file" accept="image/*" #file (change)="upload($event)" [(ngModel)]="serviceTypeModel.serviceTypeImage"
                             name="servicetypeimage" />
                            <!-- <button class="btn success-btn ml-10" (click)="uploadFile(file.files)">
                                Upload File</button> -->
                        <!-- <input type="file" accept="image/*" (change)="showPreview($event)" /> -->
                    </div>
                  <div id="result"></div>
            </div>
            <div class="form-group row">
                    <div class="col-5">
                        <label>Select City</label>
                    </div>
                    <div class="col-7">
                            <select name="cityID" placeholder="cityID" [(ngModel)]="serviceTypeModel.cityID"
                             class="form-control" #cityID="ngModel" required >
                                <option *ngFor="let city of cities"
                                    [value]="city.cityID"
                                   >
                                     {{city.cityName}}
                                </option>
                            </select>
                            <span class="text-danger"
                            *ngIf="(cityID.touched || serviceTypeForm.submitted) && cityID.errors?.required">
                            city is required
                        </span>
                    </div>
            </div>
            <div class="form-group row">
              <div class="col-4 offset-5">
                    <button type="submit" class="btn btn-primary col-12" (click)="AddServiceType()">{{btntext}}</button>
              </div>
            </div>
        </div>
        <div class="col-4 ">
                <div class="imagePreview" *ngIf="imageURL && imageURL !== ''">
                        <img [src]="imageURL"  width="200px" height="200px">
                      </div>
        </div>
    </div>
            <hr/>
            <div class="container p-2 tabledata" style="overflow-y: scroll;height: 400px;">
                    <h4 class="text-info">Category Details</h4><br>
            <table class="table table-striped table-bordered">
                    <tr>
                        <th style="display: none;">Category ID</th>
                        <th class="imgwidth"  style="width:20px">Category Image</th>
                        <th>Category Name</th>
                        <th>City</th>

                        <th class="Actionwidth">Action</th>
                    </tr>
                    <tr *ngFor="let servicetype of serviceTypeDetails; let i=index"
                    [ngClass]="{'active': selectedIndex == i}">
                       <td style="display: none;"> {{servicetype.serviceTypeID}}</td>
                        <td class="imgwidth" style="width:20px" > <img  src="data:image/png;base64,{{servicetype.serviceTypeImage}}" width="40px" height="40px" /></td>
                        <td> {{servicetype.serviceTypeName}}</td>
                        <td> {{servicetype.cityName}}</td>

                        <td class="Actionwidth">
                            <button type="submit" class="btn btn-secondary" (click)="onEdit(servicetype)" >Edit</button>
                            <button type="submit" class="btn btn-danger" (click)="onDelete(servicetype)" >Delete</button>
                        </td>
                    </tr>
                </table>
                </div>
             </div>
    </div>
</form>
<footer></footer>
<app-footer></app-footer>
