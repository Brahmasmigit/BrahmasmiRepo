<app-header></app-header>
<div class="container-fluid jumbotron">
  <div class="pull-right pr-4">
      <span style="margin-right:10px ;">{{isChecked ? 'Online':'Offline'}}</span>
    <label class="switch">

        <input [(ngModel)]="isChecked"  type="checkbox" checked>
        <span class="slider round"></span>
      </label>
    </div>


<table align="center">
    <tbody>

<tr><td>

    <div class="btn-group btn-group-toggle" >
        <label class="btn btn-primary">
            <input (click)="CalendarTab('current')" type="radio" name="options" id="option1" autocomplete="off" checked="true"> Current
          </label>
        <label class="btn btn-primary">
          <input (click)="CalendarTab('tomorrow')"  type="radio" name="options" id="option1" autocomplete="off"> Tomorrow
        </label>
        <label class="btn btn-primary">
          <input (click)="CalendarTab('week')"  type="radio" name="options" id="option2" autocomplete="off"> Current Week
        </label>
        <label class="btn btn-primary">
            <input (click)="CalendarTab('upcoming')"  type="radio" name="options" id="option2" autocomplete="off"> Upcoming
          </label>
          <label class="btn btn-primary">
            <input (click)="CalendarTab('history')"  type="radio" name="options" id="option2" autocomplete="off"> History
          </label>
      </div>
</td></tr>

    </tbody>
</table>

<div class="container h-100" style="margin-top: 25px;">
    <div class="row">
        <div class="col-md-4" *ngFor="let item of ongoing">
            <div class="card border-primary mb-3 w-100 h-100">
                <div class="card-header">{{item.serviceName}}  <div class="pull-right">
                  <span *ngIf="item.bookingStatusId =='1' || item.bookingStatusId =='2' || item.bookingStatusId =='3'  || item.bookingStatusId =='5'" class="badge badge-success badge-pill">
                    {{item.bookingStatus}}
                  </span>
                  <span *ngIf="item.bookingStatusId =='6'" class="badge badge-warning badge-pill"> {{item.bookingStatus}}</span>
                  <span *ngIf="item.bookingStatusId =='4'" class="badge badge-danger badge-pill"> {{item.bookingStatus}}</span>
                </div></div>

                <div class="card-body w-100 h-100">

                    <div class="conatiner-fluid">
                        <div class="row">
                            <div class="col-md-3">
                                <img src="../../assets/profileicon.png"/>
                            </div>
                            <div class="col-md-9">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-12">Customer Name: {{item.username}}</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">Location: {{item.bookingLocation}}</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">Booking Date: {{item.bookingDate}}</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">Booking Timings: {{item.bookingTime}}</div>
                                        </div>
                                        <div class="row" *ngIf="item.ratingsId">
                                          <div class="col-md-12">Ratings: {{item.ratingsId}}   <i class="fa fa-star starorange" aria-hidden="true" ></i></div>
                                      </div>
                                        <div class="row" *ngIf="item.timeIn">
                                          <div class="col-md-12">Time In: {{item.timeIn}}</div>
                                      </div>
                                      <div class="row" *ngIf="item.timeOut">
                                        <div class="col-md-12">Time Out: {{item.timeOut}} </div>
                                    </div>
                                    <div class="row text-left" *ngIf="item.bookingType=='virtualPooja' || item.bookingType=='virtualAstrology'">
                                      <div class="col-md-12" [attr.disabled]="item.bookingStatusId =='7' || item.bookingStatusId =='5' || item.bookingStatusId =='4'? true : false ">
                                         <a class="pointer" (click)="Meeting(item.bookingId)">Virtual Online Pooja</a></div>
                                  </div>
                                    </div>
                                </div>
                        </div>
                    </div>

                </div>
                <div class="card-footer" style="background-color:#dfefef;color: white;text-align: center;font-weight: bold;">
                  <!--<button type="button" class="btn btn-primary" (click)="Accept(item.bookingId)">Accept</button>-->
                  <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                    <button type="button" class="btn btn-primary">Update Status</button>
                    <div class="btn-group" role="group">
                      <button id="btnGroupDrop1" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
                      <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                        <a class="dropdown-item" *ngIf="item.bookingStatusId =='1'"  (click)="Accept(item.bookingId,2)">Accept</a>
                        <a class="dropdown-item"  (click)="Accept(item.bookingId,3)">In Progress</a>
                        <a class="dropdown-item" (click)="Accept(item.bookingId,6)">Notify Admin</a>
                        <a class="dropdown-item" *ngIf="item.bookingStatusId =='1'"  (click)="Accept(item.bookingId,4)">Cancel</a>
                      </div>
                    </div>
                  </div>
                    <button type="button" class="btn btn-primary" style="margin-left: 10px;" (click)="placeOrder(mymodal)">View Booking</button>

                </div>
            </div>
            <ng-template #mymodal let-modal>
              <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">Booking Details</h4>
                <button type="button" style="border:0px;"  aria-label="Close" (click)="modal.dismiss('Cross click')">
                  <span aria-hidden="true">Ã—</span>
                </button>
              </div>
              <div class="modal-body w-100">
                <div class="contained-fluid w-100 text-left legend">
                  <div class="row p-2">
                    <div class="col-md-6">
                      Customer Mobile No:
                    </div>
                    <div class="col-md-6">
                      {{item.mobileNumber}}
                    </div>
                  </div>

                  <div class="row p-2">
                    <div class="col-md-6">
                      Customer EmailId:
                    </div>
                    <div class="col-md-6">
                      {{item.emailId}}
                    </div>
                  </div>

                  <div class="row p-2">
                    <div class="col-md-6">
                      City:
                    </div>
                    <div class="col-md-6">
                      {{item.cityName}}
                    </div>
                  </div>

                  <div class="row p-2">
                    <div class="col-md-6">
                      Address:
                    </div>
                    <div class="col-md-6">
                      {{item.billingAddress}}
                    </div>
                  </div>

                  <div class="row p-2">
                    <div class="col-md-6">
                      Customer PinCode:
                    </div>
                    <div class="col-md-6">
                      {{item.pinCode}}
                    </div>
                  </div>
                  <div class="row p-2">
                    <div class="col-md-6">
                      Amount Paid:
                    </div>
                    <div class="col-md-6">
                      {{item.total}}
                    </div>
                  </div>
                  <div class="row p-2">
                    <div class="col-md-6">
                      Payment Mode:
                    </div>
                    <div class="col-md-6">
                      {{item.modeOfPayment}}
                    </div>
                  </div>
                  <div class="row p-2">
                    <div class="col-md-6">
                      Package:
                    </div>
                    <div class="col-md-6">
                      {{item.packageName}}
                    </div>
                  </div>

                  <div class="row p-2">
                    <div class="col-md-6">
                      Review Comments:
                    </div>
                    <div class="col-md-6">
                      {{item.reviewComments}}
                    </div>
                  </div>
              </div>
            </div>
              <div class="modal-footer">

                <button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Close</button>
              </div>
            </ng-template>
        </div> <!--end of for loop-->
    </div>
</div>


</div>
<app-footer></app-footer>

