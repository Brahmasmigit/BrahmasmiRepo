<app-adminheader></app-adminheader>
<form #productForm="ngForm" (ngSubmit)="productForm.form.valid &&AddProduct()">
    <div class="row  mt-5">

        <div class="container card border-primary  p-4" >
            <br>
           <h4>Add Product :</h4>
            <hr/>
            <div class="form-group row">
             <div class="col-6 ">
                <div class="form-group row">
                    <div class="col-5">
                        <label>Select Product Category</label>
                    </div>
                    <div class="col-7">
                            <select name="productCategoryID" placeholder="productCategoryID" [(ngModel)]="productModel.productCategoryID" (change)="selectCategory($event.target.value)"
                             class="form-control" #productCategoryID="ngModel" required >
                                <option *ngFor="let product of productcategories; let i = index;"
                                    [value]="product.productCategoryID"
                                   >
                                     {{product.productCategoryName}}
                                </option>
                            </select>
                            <span class="text-danger"
                            *ngIf="(productCategoryID.touched || productForm.submitted) && productCategoryID.errors?.required">
                            ProductCategory Name is required
                        </span>
                    </div>
            </div>
            <div class="form-group row">
                <div class="col-5">
                    <label>Product Name :</label>
                </div>
                <div class="col-7">
                    <input type="text" class="form-control"  id="productName"
                     name="productName"  [(ngModel)]="productModel.productName"
                     #productName="ngModel" required>
                     <span class="text-danger"
                     *ngIf="(productName.touched || productForm.submitted) && productName.errors?.required">
                     Product Name is required
                 </span>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-5">
                    <label>Product Price :</label>
                </div>
                <div class="col-7">
                    <input type="text" class="form-control"  id="productPrice"
                     name="productPrice"  [(ngModel)]="productModel.productPrice"
                     #productPrice="ngModel" required>
                     <span class="text-danger"
                     *ngIf="(productPrice.touched || productForm.submitted) && productPrice.errors?.required">
                     Product Name is required
                 </span>
                </div>
            </div>
            <div class="form-group row">
                    <div class="col-5">
                        <label>Product Image</label>
                    </div>
                    <div class="col-7">
                            <input type="file" accept="image/*" #file (change)="upload($event)" [(ngModel)]="productModel.productImage"
                             name="productImage" />
                            <!-- <button class="btn success-btn ml-10" (click)="uploadFile(file.files)">
                                Upload File</button> -->
                        <!-- <input type="file" accept="image/*" (change)="showPreview($event)" /> -->
                    </div>
                  <div id="result"></div>
            </div>
            <div class="form-group row">
                    <div class="col-5">
                        <label>Select City</label>
                    </div>
                    <div class="col-7">
                            <select name="cityID" placeholder="cityID" [(ngModel)]="productModel.cityID"
                             class="form-control" #cityID="ngModel" required >
                                <option *ngFor="let city of Cities"
                                    [value]="city.cityID"
                                   >
                                     {{city.cityName}}
                                </option>
                            </select>
                            <span class="text-danger"
                            *ngIf="(cityID.touched || productForm.submitted) && cityID.errors?.required">
                            city is required
                        </span>
                    </div>
            </div>
               <!-- <div class="form-group row">
                <div class="col-5">
                    <label>Product Items :</label>
                </div>
                <div class="col-7">
                    <textarea type="text" class="form-control"  id="items"
                     name="items"  [(ngModel)]="productModel.items"
                     #items="ngModel" required></textarea>
                     <span class="text-danger"
                     *ngIf="(items.touched || productForm.submitted) && items.errors?.required">
                     Product Items are required
                 </span>
                </div>
            </div> -->


            </div>

            <div class="col-4 ">
                <div class="imagePreview" *ngIf="imageURL && imageURL !== ''">
                        <img [src]="imageURL"  width="200px" height="200px">
                      </div>
        </div>
    </div>
    <div class="form-group row" *ngIf="Items">
      <div class="col-2">

            Item Details :

        </div>
      <div class="col-11">
      <table class="table table-striped table-bordered">
        <thead>
          <th>ACTION</th>
          <th>ItemCategory ID</th>
          <th>Item Name</th>
          <th>Item Quantity</th>

          <th></th>
        </thead>
        <tbody>
          <tr *ngFor="let dynamic of ItemArray; let i = index;">
            <td (click)="deleteItem(i)">
              <i class="fa fa-trash fa-2x"></i>
            </td>
            <td>
              <select name="itemCategoryID[-{{i}}]" placeholder="itemCategoryID" [(ngModel)]="dynamic.itemCategoryID"
              class="form-control" >
                 <option *ngFor="let item of itemcategories"
                     [value]="item.itemCategoryID"
                    >
                      {{item.itemCategoryName}}
                 </option>
             </select>
              <!-- <input [(ngModel)]="dynamic.ItemCategoryID" name="itemName[-{{i}}]" id="itemName" class="form-control" type="text" /> -->
            </td>
            <td>
              <input [(ngModel)]="dynamic.ItemName" name="itemName[-{{i}}]" id="itemName" class="form-control" type="text" />
            </td>
            <td>
              <input [(ngModel)]="dynamic.ItemQuantity" name="itemQuantity[-{{i}}]" id="itemQuantity" class="form-control"
                type="text" />
            </td>

            <td (click)="addItem(i)">
              <i class="fa fa-plus fa-2x"></i>
            </td>
          </tr>

        </tbody>
      </table>
      </div>
    </div>

  <div class="form-group row" *ngIf="KeyInsights">
      <div class="col-2">

            Key Insights :

        </div>
      <div class="col-11">
      <table class="table table-striped table-bordered">
        <thead>
          <th>ACTION</th>

          <th>KeyInsights Name</th>


          <th></th>
        </thead>
        <tbody>
          <tr *ngFor="let dynamic of KeyInsightsArray; let i = index;">
            <td (click)="deleteKey(i)">
              <i class="fa fa-trash fa-2x"></i>
            </td>

            <td>
              <input [(ngModel)]="dynamic.ProductKeyInsightsName" name="productKeyInsightsName[-{{i}}]" id="productKeyInsightsName" class="form-control" type="text" />
            </td>


            <td (click)="addKey(i)">
              <i class="fa fa-plus fa-2x"></i>
            </td>
          </tr>

        </tbody>
      </table>
      </div>

    </div>
    <div class="col-12">
        <div class="form-group">
        <label>Short Description :</label>
        </div>
        </div>
            <div class="col-12">
                <div class="form-group">
                <quill-editor [styles]="{height: '200px'}" name="productShortDescription"
                [(ngModel)]="productModel.productShortDescription" trackChanges="all" #productShortDescription="ngModel"
                [modules]="modules" required>
            </quill-editor>
            <span class="text-danger"
                *ngIf="(productShortDescription.touched || productForm.submitted) && productShortDescription.errors?.required">
                Product Short Description is required
            </span>

         </div>
         </div>
         <div class="col-12">
                <div class="form-group">
                <label>Long Description :</label>
                </div>
         </div>
         <div class="col-12">
                <div class="form-group">
                <quill-editor [styles]="{height: '200px'}" name="productLongDescription"
                [(ngModel)]="productModel.productLongDescription" trackChanges="all" #productLongDescription="ngModel"
                [modules]="modules" required>
            </quill-editor>
            <span class="text-danger"
                *ngIf="(productLongDescription.touched || productForm.submitted) && productLongDescription.errors?.required">
                Product Long Description is required
            </span>
            </div>
         </div>
         <div class="col-12">
            <div class="form-group">
            <div class="col-3">
                    <button class="btn btn-primary col-12">{{btntext}}</button>
              </div>
            </div>
        </div>
        <hr/>
        <div class="container p-2 tabledata" style="overflow-y: scroll;overflow-x: scroll; height: 400px;">
                <h4 class="text-info">Product Details</h4><br>
        <table class="table table-striped table-bordered" >
                <tr>
                  <th style="display: none;">ProductCategoryID</th>
                    <th style="display: none;">Product ID</th>

                    <th class="imgwidth">Product Image</th>
                    <th>ProductCategory Name</th>
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>City</th>
                    <th>Short Description</th>
                    <th>Long Description</th>

                    <!-- <th class="Actionwidth">Action</th> -->
                </tr>
                <tr *ngFor="let products of product; let i=index"
                [ngClass]="{'active': selectedIndex == i}">
                <td style="display: none;"> {{products.productCategoryID}}</td>
                   <td style="display: none;"> {{products.productID}}</td>
                    <td class="imgwidth" > <img  src="data:image/png;base64,{{products.productImage}}" width="40px" height="40px" /></td>
                    <td> {{products.productCategoryName}}</td>
                    <td> {{products.productName}}</td>
                    <td> {{products.productPrice}}</td>
                    <td> {{products.cityName}}</td>
                    <td>{{products.productShortDescription}}</td>
                    <td>{{products.productLongDescription}}</td>

                      <!--  <td class="Actionwidth">
                     <button class="btn btn-secondary" (click)="onEdit(servicetype)" >Edit</button>
                        <button class="btn btn-danger" (click)="onDelete(servicetype)" >Delete</button>
                    </td> -->
                </tr>
            </table>
            </div>
        </div>


             </div>

</form>
<footer></footer>

