<style type="text/css">
    body{
    background:#f3f3f3;
    color: #616f80;
}


.avatar-xs {
    height: 2.3rem;
    width: 2.3rem;
}
</style>
<nav class="navbar navbar-expand-lg navbar-light" style="background-color: snow;">
    <a class="navbar-brand" href="#">Brahmasmi | Admin</a>
    <span style="width: 500px;"></span>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor03" aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarColor03">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" routerLink="/admindashboard" routerLinkActive="active">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/adminservicetype" routerLinkActive="active">Manage Categories</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/adminservicedetails" routerLinkActive="active">Manage Services</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/adminvendorenquiry" routerLinkActive="active">Register a Vendor</a>
        </li>
      </ul>



    </div>
  </nav>
<div class="container-fluid w-100" style="margin-top: 20px;" >
    <div class="row">
        <div class="col-xl-3 col-md-6">
            <div class="card bg-pattern">
                <div class="card-body">
                    <div class="float-right">
                        <i class="fa fa-archive text-primary h4 ml-3"></i>
                    </div>
                    <h5 class="font-size-20 mt-0 pt-1">{{totalRequests}}</h5>
                    <p class="text-muted mb-0">Total Requests</p>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card bg-pattern">
                <div class="card-body">
                    <div class="float-right">
                        <i class="fa fa-th text-primary h4 ml-3"></i>
                    </div>
                    <h5 class="font-size-20 mt-0 pt-1">{{completedRequests}}</h5>
                    <p class="text-muted mb-0">Completed Requests</p>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card bg-pattern">
                <div class="card-body">
                    <div class="float-right">
                        <i class="fa fa-file text-primary h4 ml-3"></i>
                    </div>
                    <h5 class="font-size-20 mt-0 pt-1">{{pendingRequests}}</h5>
                    <p class="text-muted mb-0">Pending Requests</p>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6">
            <div class="card">
                <div class="card-body">
                    <form>
                        <div class="form-group mb-0">
                            <label>Search</label>
                            <div class="input-group mb-0">
                                <input type="text" class="form-control" placeholder="Search..." aria-describedby="project-search-addon" />
                                <div class="input-group-append">
                                    <button class="btn btn-danger" type="button" id="project-search-addon"><i class="fa fa-search search-icon font-12"></i></button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- end row -->

    <div class="row">
        <div class="col-lg-12 w-100">
            <div class="card">
                <div class="card-body">
                    <div class="table-responsive project-list">
                        <table class="table project-table table-centered table-nowrap">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Services</th>
                                    <th scope="col">Booking Date</th>
                                    <th scope="col">Time</th>
                                    <th scope="col">Vendor</th>
                                    <th scope="col">Customer</th>
                                    <th scope="col">Amount Paid</th>
                                    <th scope="col">Payment Mode</th>
                                    <th scope="col">City</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Update Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let item of adminDasboard; let i=index">
                                    <th scope="row">{{i+1}}</th>
                                    <td><a href="">{{item.serviceName}}</a></td>
                                    <td>{{item.bookingDate}}</td>
                                    <td>
                                        {{item.bookingTime}}
                                    </td>
                                    <td>
                                        {{item.vendorname}}
                                    </td>
                                    <td>
                                      {{item.username}}
                                  </td>
                                  <td>
                                    {{item.bookingAmount}}
                                </td>
                                <td>
                                  {{item.paymentMode}}
                              </td>
                              <td>
                                {{item.cityName}}
                            </td>
                                    <td>
                                        <span class="text-success font-12"><i class="mdi mdi-checkbox-blank-circle mr-1"></i> {{item.bookingStatus}}</span>
                                    </td>

                                    <td>
                                        <div class="action">
                                            <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                                                <button type="button" class="btn btn-primary" >Update</button>
                                                <div class="btn-group" role="group">
                                                  <button id="btnGroupDrop1" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
                                                  <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                                                    <a class="dropdown-item pointer" (click)="AssignVendor(item.bookingId)">Assign Vendor</a>
                                                    <a *ngIf="item.bookingStatusID=='7'" class="dropdown-item pointer" (click)="ChangeStatus(item.bookingId,1,item.vendorname)">Approve</a>
                                                    <a *ngIf="item.bookingStatusID!='7'" class="dropdown-item pointer" (click)="ChangeStatus(item.bookingId,5,item.vendorname)">Approve</a>
                                                    <a class="dropdown-item pointer" (click)="ChangeStatus(item.bookingId,4)">Cancel</a>
                                                  </div>
                                                </div>
                                              </div>
                                           <!-- <a  class="text-success mr-4" data-toggle="tooltip" data-placement="top" title="" data-original-title="Edit"> <i class="fa fa-pencil h5 m-0"></i></a>
                                            <a  class="text-danger" data-toggle="tooltip" data-placement="top" title="" data-original-title="Close"> <i class="fa fa-remove h5 m-0"></i></a>-->
                                        </div>
                                    </td>
                                </tr> <!--end of gor loop-->


                            </tbody>
                        </table>
                    </div>
                    <!-- end project-list -->

                    <div class="pt-3">
                        <ul class="pagination justify-content-end mb-0">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">Next</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end row -->
</div>

<ng-template #mymodal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title"><span>Assign Vendor</span></h4>
    <button type="button" style="border:0px;"  aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">Ã—</span>
    </button>
  </div>
  <div class="modal-body w-100">
    <div class="contained-fluid w-100">
      <div class="row p-2">
        <div class="col-md-12">
          <select style="width: 200px;margin-right: 20px;" name="cityID" placeholder="Title" class="form-control"
          (change)="selectCity($event)"  [(ngModel)]="cityId"  >
                 <option *ngFor="let city of City"
                 [value]="city.cityID"
                 [selected]="cityId==city.cityID">

                  {{city.cityName}}
             </option>
          </select>
        </div>
      </div>
      <div class="row p-2">
        <div class="col-md-12">
          <table class="table table-bordered w-100" >
            <thead class="thead-light">
                <tr>
                  <th></th>
                    <th>Vendor Name</th>
                    <th>City</th>
                    <th>Mobile Number</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of vendorlist;let i=index"  [class.selected]="i == HighlightRow"  >
                  <td><a  class="text-danger pointer"  (click)="SelectVendor(item.vendorId,i)"> Select</a></td>
                    <td>{{item.vendorName}}</td>
                    <td>{{item.cityName}}</td>
                    <td>{{item.mobileNumber}}</td>

                </tr>

            </tbody>
          </table>
        </div>
      </div>


    </div>

  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="SubmitVendor()">Submit</button>
    <button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Cancel</button>
  </div>
</ng-template>
